"use strict";(self.webpackChunkFront_End=self.webpackChunkFront_End||[]).push([[8],{4008:(ot,j,r)=>{r.r(j),r.d(j,{ProjectModule:()=>W});var d=r(6895),s=r(4006),p=r(4859),v=r(9549),P=r(7392),x=r(4144),E=r(3865),b=r(4466),u=r(858),A=r(262),C=r(9646),N=r(1696),t=r(4650),f=r(590),Z=r(8505),Y=r(529),y=r(9086);let _=(()=>{class o{constructor(e,a){this.httpClient=e,this.authservice=a,this.API="https://18.230.156.247:3001/api/project"}list(){return this.httpClient.get(this.API).pipe((0,f.P)(),(0,Z.b)(e=>{console.log(e)}))}listByUser(){return this.httpClient.get(this.API+"/user/"+this.authservice.Usuario).pipe((0,f.P)(),(0,Z.b)(e=>{console.log(e)}))}save(e){return console.log(e),e.id?(console.log("update"),this.update(e)):(console.log("create"),this.create(e))}create(e){return this.httpClient.post(this.API,e).pipe((0,f.P)())}update(e){return this.httpClient.put(`${this.API}/${e.id}`,e).pipe((0,f.P)())}loadById(e){return this.httpClient.get(`${this.API}/${e}`)}delete(e){return this.httpClient.delete(this.API+"/"+e.id)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(Y.eN),t.LFG(y.e))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var w=r(5412),c=r(5717),h=r(3546),T=r(3683),O=r(1572),g=r(1561);function D(o,n){1&o&&(t.TgZ(0,"th",17),t._uU(1," Nome "),t.qZA())}function I(o,n){if(1&o&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function S(o,n){1&o&&(t.TgZ(0,"th",17),t._uU(1," Descric\xe3o "),t.qZA())}function F(o,n){if(1&o&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.description," ")}}function B(o,n){1&o&&(t.TgZ(0,"th",17),t._uU(1," Cria\xe7\xe3o"),t.qZA())}function H(o,n){if(1&o&&(t.TgZ(0,"td",18),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.createdAt,"dd/MM/yyyy HH:mm:ss")," ")}}function J(o,n){1&o&&(t.TgZ(0,"th",17),t._uU(1," Atualiza\xe7\xe3o "),t.qZA())}function k(o,n){if(1&o&&(t.TgZ(0,"td",18),t._uU(1),t.ALo(2,"date"),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.updatedAt,"dd/MM/yyyy HH:mm:ss")," ")}}function z(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-header-cell")(1,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.Add())}),t.TgZ(2,"mat-icon"),t._uU(3,"add"),t.qZA()()()}}function R(o,n){if(1&o){const e=t.EpF();t.TgZ(0,"mat-cell")(1,"button",20),t.NdJ("click",function(){const l=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(m.onEdit(l))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",21),t.NdJ("click",function(){const l=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(m.onDelete(l))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()(),t.TgZ(7,"button",22)(8,"mat-icon"),t._uU(9,"menu"),t.qZA()(),t.TgZ(10,"mat-menu",null,23)(12,"button",24),t.NdJ("click",function(){const l=t.CHM(e).$implicit,m=t.oxw(2);return t.KtG(m.onTask(l))}),t.TgZ(13,"mat-icon"),t._uU(14,"task"),t.qZA(),t.TgZ(15,"span",25),t._uU(16,"Tarefas"),t.qZA()()()()}if(2&o){const e=t.MAs(11);t.xp6(7),t.Q6J("matMenuTriggerFor",e)}}function $(o,n){1&o&&t._UZ(0,"tr",26)}function Q(o,n){1&o&&t._UZ(0,"tr",27)}function G(o,n){if(1&o&&(t.TgZ(0,"div",4)(1,"table",5),t.ynx(2,6),t.YNc(3,D,2,0,"th",7),t.YNc(4,I,2,1,"td",8),t.BQk(),t.ynx(5,9),t.YNc(6,S,2,0,"th",7),t.YNc(7,F,2,1,"td",8),t.BQk(),t.ynx(8,10),t.YNc(9,B,2,0,"th",7),t.YNc(10,H,3,4,"td",8),t.BQk(),t.ynx(11,11),t.YNc(12,J,2,0,"th",7),t.YNc(13,k,3,4,"td",8),t.BQk(),t.ynx(14,12),t.YNc(15,z,4,0,"mat-header-cell",13),t.YNc(16,R,17,1,"mat-cell",14),t.BQk(),t.YNc(17,$,1,0,"tr",15),t.YNc(18,Q,1,0,"tr",16),t.qZA()()),2&o){const e=n.ngIf,a=t.oxw();t.xp6(1),t.Q6J("dataSource",e),t.xp6(16),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns)}}function K(o,n){1&o&&(t.TgZ(0,"div",28),t._UZ(1,"mat-spinner"),t.qZA())}let L=(()=>{class o{constructor(e,a,i,l){this.projetoService=e,this.router=a,this.route=i,this.dialog=l,this.displayedColumns=["name","description","updatedAt","createdAt","actions"],this.projetos=[],this.project$=this.projetoService.listByUser().pipe((0,A.K)(m=>(this.onErro("Erro ao carregar. "),(0,C.of)([]))))}ngOnInit(){}onErro(e){this.dialog.open(N.I,{data:e})}onEdit(e){this.router.navigate(["editar",e.id],{relativeTo:this.route})}Add(){this.router.navigate(["novo"],{relativeTo:this.route})}refresh(){this.project$=this.projetoService.listByUser().pipe((0,A.K)(e=>(this.onErro("Erro ao carregar Projetos."),(0,C.of)([]))))}onDelete(e){this.projetoService.delete(e).subscribe(a=>{this.projetos=this.projetos.filter(i=>i!==e),alert("Projeto Deletado"),this.refresh()})}onTask(e){this.router.navigate(["/tarefa"],{relativeTo:this.route}),localStorage.setItem("projeto",e.id),console.log(localStorage.getItem("projeto"))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(_),t.Y36(u.F0),t.Y36(u.gz),t.Y36(w.uw))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-project"]],decls:9,vars:4,consts:[[1,"container"],["color","primary"],["class","tabela_container",4,"ngIf","ngIfElse"],["loading",""],[1,"tabela_container"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","createdAt"],["matColumnDef","updatedAt"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-mini-fab","","color","accent","aria-label","adicionar servi\xe7o",3,"click"],["mat-icon-button","","color","primary","aria-label","Editar  servi\xe7o",3,"click"],["mat-icon-button","","color","warn","aria-label","Remover  servi\xe7o",3,"click"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"tarefa"],["mat-header-row",""],["mat-row",""],[1,"loading-spinner"]],template:function(e,a){if(1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-toolbar",1)(3,"span"),t._uU(4,"Projetos Cadastrados"),t.qZA()(),t.YNc(5,G,19,3,"div",2),t.ALo(6,"async"),t.YNc(7,K,2,0,"ng-template",null,3,t.W1O),t.qZA()()),2&e){const i=t.MAs(8);t.xp6(5),t.Q6J("ngIf",t.lcZ(6,2,a.project$))("ngIfElse",i)}},dependencies:[d.O5,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,h.a8,T.Ye,O.Ou,p.RK,p.nh,P.Hw,g.VK,g.OP,g.p6,d.Ov,d.uU],styles:[".container[_ngcontent-%COMP%]{width:80%;max-width:1200px;margin:0 auto;font-family:Roboto Condensed,sans-serif}mat-card[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin-top:15px;border:solid 1px #d9d9d9;border-radius:8p}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:center;border-radius:8px 8px 0 0}span[_ngcontent-%COMP%]{font-size:30px}div.tabela_container[_ngcontent-%COMP%]{width:99%}table[_ngcontent-%COMP%]{width:100%;margin:5px;box-shadow:none}td[_ngcontent-%COMP%]{padding:10px;color:#404040}th[_ngcontent-%COMP%], mat-header-cell[_ngcontent-%COMP%], mat-cell[_ngcontent-%COMP%]{height:70px;font-size:18px;color:#404040}span.tarefa[_ngcontent-%COMP%]{font-size:18px;color:#404040}.loading-spinner[_ngcontent-%COMP%]{padding:25px;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.15)}"]}),o})();var q=r(7009);let M=(()=>{class o{constructor(e,a,i,l,m,tt){this.formBuilder=e,this.service=a,this.snackBar=i,this.location=l,this.route=m,this.authService=tt;const et=new Date,U=new d.uU("en-US").transform(et,"dd/MM/yyyy HH:mm:ss");this.form=this.formBuilder.group({id:[null],name:[null],description:[null],id_User:this.authService.Usuario,createdAt:U,updatedAt:U})}ngOnInit(){const e=this.route.snapshot.data.projeto,a=new d.uU("en-US").transform(e[0].createdAt,"dd/MM/yyyy HH:mm:ss"),i=new d.uU("en-US").transform(e[0].updatedAt,"dd/MM/yyyy HH:mm:ss");this.form.setValue({id:e[0].id,name:e[0].name,description:e[0].description,id_User:this.authService.Usuario,createdAt:a,updatedAt:i}),console.log("ID do projeto:",e[0].id)}onSubmit(){this.service.save(this.form.value).subscribe(e=>this.onSucess(),e=>this.onError())}onCancel(){this.location.back()}onSucess(){this.snackBar.open("Servi\xe7o salvo com sucesso!","",{duration:5e3}),this.onCancel()}onError(){this.snackBar.open("Erro ao salvar servi\xe7o","",{duration:5e3})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.qu),t.Y36(_),t.Y36(q.ux),t.Y36(d.Ye),t.Y36(u.gz),t.Y36(y.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-projeto-form"]],decls:27,vars:1,consts:[[1,"container"],[1,"min-width",3,"formGroup"],[1,"full-width"],["matInput","","placeholder","Nome","formControlName","name"],["matInput","","placeholder","Atualiza\xe7\xe3o","formControlName","updatedAt"],["matInput","","placeholder","Cria\xe7\xe3o","formControlName","createdAt"],["name","","id","","cols","20","rows","6","matInput","","placeholder","Descri\xe7\xe3o","formControlName","description"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","","color","warn",3,"click"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-toolbar"),t._uU(3,"Detalhes do Projeto"),t.qZA(),t.TgZ(4,"mat-card-content")(5,"form",1)(6,"mat-form-field",2)(7,"mat-label"),t._uU(8,"NOME"),t.qZA(),t._UZ(9,"input",3),t.qZA(),t.TgZ(10,"mat-form-field",2)(11,"mat-label"),t._uU(12,"Atualiza\xe7\xe3o"),t.qZA(),t._UZ(13,"input",4),t.qZA(),t.TgZ(14,"mat-form-field",2)(15,"mat-label"),t._uU(16,"Cria\xe7\xe3o"),t.qZA(),t._UZ(17,"input",5),t.qZA(),t.TgZ(18,"mat-form-field",2)(19,"mat-label"),t._uU(20,"Descri\xe7\xe3o"),t.qZA(),t._UZ(21,"textarea",6),t.qZA()()(),t.TgZ(22,"mat-card-actions")(23,"button",7),t.NdJ("click",function(){return a.onSubmit()}),t._uU(24,"Salvar"),t.qZA(),t.TgZ(25,"button",8),t.NdJ("click",function(){return a.onCancel()}),t._uU(26,"Cancelar"),t.qZA()()()()),2&e&&(t.xp6(5),t.Q6J("formGroup",a.form))},dependencies:[h.a8,h.hq,h.dn,T.Ye,p.lW,v.KE,v.hX,x.Nt,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u],styles:[".container[_ngcontent-%COMP%]{width:80%;margin:0 auto;font-family:Roboto Condensed,sans-serif}mat-card[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin-top:15px;box-shadow:none;border:#d9d9d9 1px solid}mat-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:center}mat-card-content[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}form[_ngcontent-%COMP%]{display:block;width:80%;margin:5px}.full-width[_ngcontent-%COMP%]{display:block;width:100%;margin:0 auto;font-size:18px}mat-card-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;width:100%}"]}),o})();const X=[{path:"",component:L},{path:"novo",component:M},{path:"editar/:id",component:M,resolve:{projeto:(()=>{class o{constructor(e){this.service=e}resolve(e,a){return e.params&&e.params.id?this.service.loadById(e.params.id):(0,C.of)({id:0,name:"",description:"",id_User:0,createdAt:new Date,updatedAt:new Date})}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(_))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()}}];let V=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(X),u.Bz]}),o})(),W=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,V,E.M,b.m,s.u5,s.UX,v.lN,x.c,p.ot,P.Ps,g.Tx]}),o})()}}]);